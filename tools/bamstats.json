{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "description": "Alignment statistics gathered by Biopet's BamStats class.",
  "type": "object",
  "minProperties": 8,
  "additionalProperties": false,

  "properties": {
    "mapping_quality": { "$ref": "#/definitions/histogram" },
    "insert_size": { "$ref": "#/definitions/histogram" },
    "clipping": { "$ref": "#/definitions/histogram" },
    "left_clipping": { "$ref": "#/definitions/histogram" },
    "right_clipping": { "$ref": "#/definitions/histogram" },
    "5_prime_clipping": { "$ref": "#/definitions/histogram" },
    "3_prime_clipping": { "$ref": "#/definitions/histogram" },

    "flagstats": {
      "type": "object",
      "minProperties": 28,
      "additionalProperties": false,

      "properties": {

        "All": { "type": "integer" },
        "Duplicates": { "type": "integer" },
        "First inverted, second read inverted": { "type": "integer" },
        "First inverted, second read normal": { "type": "integer" },
        "First normal, second read inverted (paired end orientation)": { "type": "integer" },
        "First normal, second read normal": { "type": "integer" },
        "FirstOfPair": { "type": "integer" },
        "Mapped": { "type": "integer" },
        "Mate in same strand": { "type": "integer" },
        "Mate on other chr": { "type": "integer" },
        "MateNegativeStrand": { "type": "integer" },
        "MateUnmapped": { "type": "integer" },
        "NotPrimaryAlignment": { "type": "integer" },
        "ProperPair": { "type": "integer" },
        "ReadFailsVendorQualityCheck": { "type": "integer" },
        "ReadNegativeStrand": { "type": "integer" },
        "ReadPaired": { "type": "integer" },
        "SecondOfPair": { "type": "integer" },
        "SecondaryOrSupplementary": { "type": "integer" },
        "SupplementaryAlignment": { "type": "integer" },

        "cross_counts": {
          "type": "array",
          "items": {
            "type": "array",
            "items": { "type": "integer" }
          }
        }
      },

      "patternProperties": {
        "^MAPQ>[1-6]?0$": { "type": "integer" }
      }
    }
  },

  "definitions": {

    "histogram": {
      "type": "object",
      "minProperties": 2,
      "additionalProperties": false,

      "properties": {

        "counts": {
          "type": "array",
          "items": { "type": "integer" }
        },
        "values": {
          "type": "array",
          "items": { "type": "integer" }
        }
      }
    }
  }
}